!function(e){e.fn.sos=function(a){var o={SOS_3_nombreDelBotonDeAsignar:"boton_agregar",SOS_3_nombreDelBotonDeQuitar:"boton_quitar",SOS_3_nombreDelBotonDeGrabar:"boton_grabar",SOS_3_mostrarCamposDeBusqueda:!1,SOS_3_busquedasEnTiempoReal:!1,SOS_3_distinguirCapitalizacion:!0,SOS_3_ignorarAcentuadas:!0,SOS_3_scriptDeLecturaDeDatos:"php/leer_opciones_de_datos.php",SOS_3_scriptDeGrabacionDeDatos:"php/grabar_selectores.php",SOS_3_claseParaContenedorGeneral:"claseParaContenedorGeneral",SOS_3_claseParaContenedoresDeBusqueda:"claseParaContenedoresDeBusqueda",SOS_3_claseParaContenedoresDeSelector:"claseParaContenedoresDeSelector",SOS_3_claseParaContenedoresDeTitulo:"claseParaContenedoresDeTitulo",SOS_3_claseParaContenedoresGlobales:"claseParaContenedoresGlobales",SOS_3_claseParaBotones:"claseParaBotones",SOS_3_claseParaSelectores:"claseParaSelectores",SOS_3_claseParaCamposDeBusqueda:"claseParaCamposDeBusqueda",SOS_3_anchura:"80%",SOS_3_altura:"400px",SOS_3_campoDeValorDeOpcion:"valor",SOS_3_campoDeTextoDeOpcion:"texto",SOS_3_campoDeOpcionHabilitada:"habilitada",SOS_3_campoDeOpcionSeleccionada:"seleccionada",SOS_3_claveParaOpcionSeleccionada:"S",SOS_3_claveParaOpcionDeseleccionada:"N",SOS_3_claveParaOpcionHabilitada:"S",SOS_3_claveParaOpcionDeshabilitada:"N",SOS_3_grabacionAutomatica:!1,SOS_3_globalLanguage:"es"};return this.each(function(){var n=e(this);switch(e.extend(o,a),e(this).css({height:o.SOS_3_altura,width:o.SOS_3_anchura}),o.SOS_3_globalLanguage){case"es":s={encabezadoDeDisponibles:"Opciones disponibles",encabezadoDeSeleccionados:"Opciones asignadas",enlaceAgregar:"Agregar",enlaceQuitar:"Quitar",enlaceGrabar:"Grabar",PH_camposDeBusqueda:"Buscar..."};break;case"en":s={encabezadoDeDisponibles:"Available options",encabezadoDeSeleccionados:"Attached options",enlaceAgregar:"Add",enlaceQuitar:"Remove",enlaceGrabar:"Save",PH_camposDeBusqueda:"Search..."};break;case"ca":s={encabezadoDeDisponibles:"Opcions disponibles",encabezadoDeSeleccionados:"Opcions assignades",enlaceAgregar:"Afegir",enlaceQuitar:"Treure",enlaceGrabar:"Gravar",PH_camposDeBusqueda:"Cercar..."};break;case"pt":s={encabezadoDeDisponibles:"Opções disponíveis",encabezadoDeSeleccionados:"Opções atribuídas",enlaceAgregar:"Adicionar",enlaceQuitar:"Remover",enlaceGrabar:"Registro",PH_camposDeBusqueda:"Pesquisa..."};break;case"fr":var s={encabezadoDeDisponibles:"Options disponibles",encabezadoDeSeleccionados:"Options attribuées",enlaceAgregar:"Ajouter",enlaceQuitar:"Supprimer",enlaceGrabar:"Sauvegarder",PH_camposDeBusqueda:"Recherche..."}}var r=e(this).attr("id"),i=e("#"+r);i.addClass(o.SOS_3_claseParaContenedorGeneral);var t="<div class='col-xs-5 "+o.SOS_3_claseParaContenedoresGlobales+"'>",c=e(t+="</div>");c.appendTo(i);var l="<div class='col-xs-2 "+o.SOS_3_claseParaContenedoresGlobales+"'>",d=e(l+="</div>");d.appendTo(i);var S="<div class='col-xs-5 "+o.SOS_3_claseParaContenedoresGlobales+"'>",p=e(S+="</div>");p.appendTo(i);var _="<div class='row "+o.SOS_3_claseParaContenedoresDeTitulo+"'>";_+=s.encabezadoDeDisponibles+"</div>",contenedorDeRotuloDeDisponiblesExtendido=e(_),contenedorDeRotuloDeDisponiblesExtendido.appendTo(c);var D="<div class='row "+o.SOS_3_claseParaContenedoresDeTitulo+"'>";D+=s.encabezadoDeSeleccionados+"</div>",contenedorDeRotuloDeAsignadosExtendido=e(D),contenedorDeRotuloDeAsignadosExtendido.appendTo(p);var u="<div class='row "+o.SOS_3_claseParaContenedoresDeBusqueda+"'></div>";contenedorDeBusquedaDeDisponiblesExtendido=e(u),o.SOS_3_mostrarCamposDeBusqueda&&contenedorDeBusquedaDeDisponiblesExtendido.appendTo(c);var O="<div class='row "+o.SOS_3_claseParaContenedoresDeBusqueda+"'></div>";contenedorDeBusquedaDeAsignadosExtendido=e(O),o.SOS_3_mostrarCamposDeBusqueda&&contenedorDeBusquedaDeAsignadosExtendido.appendTo(p);var b="<div class='row "+o.SOS_3_claseParaContenedoresDeSelector+"'>";b+="</div>",contenedorDeSelectorDeDisponiblesExtendido=e(b),contenedorDeSelectorDeDisponiblesExtendido.appendTo(c);var m="<div class='row "+o.SOS_3_claseParaContenedoresDeSelector+"'>";m+="</div>",contenedorDeSelectorDeAsignadosExtendido=e(m),contenedorDeSelectorDeAsignadosExtendido.appendTo(p);var v="<div class='row' style='padding-top:30px;'>";v+="<input type='button' id='"+o.SOS_3_nombreDelBotonDeAsignar+"' ",v+="class='btn btn-primary "+o.SOS_3_claseParaBotones+"' ",v+="value='"+s.enlaceAgregar+"'>",v+="<input type='button' id='"+o.SOS_3_nombreDelBotonDeQuitar+"' ",v+="class='btn btn-primary "+o.SOS_3_claseParaBotones+"' ",v+="value='"+s.enlaceQuitar+"'>",o.SOS_3_grabacionAutomatica||(v+="<input type='button' id='"+o.SOS_3_nombreDelBotonDeGrabar+"' ",v+="class='btn btn-primary "+o.SOS_3_claseParaBotones+"' ",v+="value='"+s.enlaceGrabar+"'>"),e(v+="</div>").appendTo(d);var g=r+"_busquedaDeDisponibles",P="<input type='text' id='"+g+"' ";P+="class='form-control "+o.SOS_3_claseParaCamposDeBusqueda+"' ",P+="placeholder = '"+s.PH_camposDeBusqueda+"'>";var h=e(P);o.SOS_3_mostrarCamposDeBusqueda&&h.appendTo(contenedorDeBusquedaDeDisponiblesExtendido);var B=r+"_busquedaDeAsignados",f="<input type='text' id='"+B+"' ";f+="class='form-control "+o.SOS_3_claseParaCamposDeBusqueda+"' ",f+="placeholder = '"+s.PH_camposDeBusqueda+"'>";var A=e(f);o.SOS_3_mostrarCamposDeBusqueda&&A.appendTo(contenedorDeBusquedaDeAsignadosExtendido);var q=r+"_selectorDisponibles",x="<select id='"+q+"' multiple ",C=e(x+="class='form-control "+o.SOS_3_claseParaSelectores+"'></select>");C.appendTo(contenedorDeSelectorDeDisponiblesExtendido);var T=r+"_selectorAsignados",y="<select id='"+T+"' multiple ",E=e(y+="class='form-control "+o.SOS_3_claseParaSelectores+"'></select>");E.appendTo(contenedorDeSelectorDeAsignadosExtendido);var G=Array();e.fn.obtenerMatrizDeOpciones=function(){e.ajax({url:o.SOS_3_scriptDeLecturaDeDatos,data:{},type:"POST",dataType:"json",async:!1,success:function(e){G=e}});for(elemento in G)G[elemento].SOS_3_index=elemento},e.fn.construirSelectores=function(){e("#"+q+" option").each(function(){e(this).remove()}),e("#"+T+" option").each(function(){e(this).remove()}),e("#"+o.SOS_3_nombreDelBotonDeAsignar).prop("disabled",!0),e("#"+o.SOS_3_nombreDelBotonDeQuitar).prop("disabled",!0);for(elemento in G){var a="<option value='"+G[elemento][o.SOS_3_campoDeValorDeOpcion]+"'";G[elemento][o.SOS_3_campoDeOpcionHabilitada]==o.SOS_3_claveParaOpcionDeshabilitada&&(a+=" disabled"),a+=">"+G[elemento][o.SOS_3_campoDeTextoDeOpcion]+"</option>";var n=e(a);G[elemento][o.SOS_3_campoDeOpcionSeleccionada]==o.SOS_3_claveParaOpcionSeleccionada?e(n).appendTo(E):e(n).appendTo(C)}},e(this).obtenerMatrizDeOpciones(),e(this).construirSelectores(),e("#"+q+", #"+T).on("change",function(){var a=e(this).prop("id"),n=!1;e("#"+a+" option").each(function(){e(this)[0].selected&&(n=!0)});var s=a==q?T:q,r=a==q?o.SOS_3_nombreDelBotonDeAsignar:o.SOS_3_nombreDelBotonDeQuitar,i=a==q?o.SOS_3_nombreDelBotonDeQuitar:o.SOS_3_nombreDelBotonDeAsignar;n?(e("#"+s+" option").each(function(){e(this).prop("selected",!1)}),e("#"+r).prop("disabled",!1),e("#"+i).prop("disabled",!0)):(e("#"+r).prop("disabled",!0),e("#"+i).prop("disabled",!0))}),e("#"+g+", #"+B).on("change keyup",function(){if("contenedor_de_selectores_busquedaDeDisponibles"==e(this).prop("id"))var a=q,s=h,r="D";else var a=T,s=A,r="A";if(o.SOS_3_busquedasEnTiempoReal){G.length=0,e.ajax({url:o.SOS_3_scriptDeLecturaDeDatos,data:{ignora_acentos:o.SOS_3_ignorarAcentuadas?"S":"N",capitalizacion:o.SOS_3_distinguirCapitalizacion?"S":"N",selector:r,busqueda:s.prop("value")},type:"POST",dataType:"json",async:!1,success:function(e){G=e}});for(elemento in G)G[elemento].SOS_3_index=elemento;n.construirSelectores()}else e("#"+a+" option").each(function(){e(this).prop("text").indexOf(s.prop("value"))>-1?e(this).css("display","block"):e(this).css("display","none")})}),e("#"+o.SOS_3_nombreDelBotonDeAsignar+", #"+o.SOS_3_nombreDelBotonDeQuitar).on("click",function(a){a.preventDefault();var s=e(this).prop("id");e("#"+(s==o.SOS_3_nombreDelBotonDeAsignar?q:T)+" option:selected").each(function(){for(elemento in G)G[elemento][o.SOS_3_campoDeValorDeOpcion]==e(this).attr("value")&&(G[elemento][o.SOS_3_campoDeOpcionSeleccionada]=G[elemento][o.SOS_3_campoDeOpcionSeleccionada]==o.SOS_3_claveParaOpcionSeleccionada?o.SOS_3_claveParaOpcionDeseleccionada:o.SOS_3_claveParaOpcionSeleccionada)}),o.SOS_3_grabacionAutomatica&&n.grabarEstadoDeOpciones(),e(this).construirSelectores()}),e("#"+o.SOS_3_nombreDelBotonDeGrabar).on("click",function(e){e.preventDefault(),n.grabarEstadoDeOpciones()}),e.fn.grabarEstadoDeOpciones=function(){e.post(o.SOS_3_scriptDeGrabacionDeDatos,{items_array:G},function(){})}}),this}}(jQuery);